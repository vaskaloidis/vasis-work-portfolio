<div class="container">
	<h1 class="fullName"><%= link_to "vasilios c. kaloidis", root_path %> <%#= image_tag('helmet.png') %></h1>
	
	<%= render "skills" %>
	
	<h1>Projects</h1>
	<div class="card-columns">
		<% @projects.each do |project| %>
				<% if project.displayed %>
						<%
							description = project.summary
							categoryHtml = buildCategoryHtml(project.categories)
						%>
						<div class="card">
							<% if project.img_file_name.empty? || project.img_file_name.blank? then
							   else %>
									<% image_tag(project.img_file_name, class: "card-img-top") %> <!-- Implement this -->
							<% end %>
							<!--<img class="card-img-top" src="..." alt="Card image cap">-->
							<div class="card-block">
								<h6 class="card-title"><%= project.name %></h6>
								<p class="card-text"><%= description %></p>
								<p class="card-block"><%= categoryHtml.html_safe %></p>
								<% if (1==2) %>
										<p class="card-text">
											<small class="text-muted">
												<!-- Eventually implement if(authenticated) -->
												<%= link_to 'Edit', edit_project_path(project) %>
											</small>
										</p>
								<% end %>
								<button type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-target="#modal<%= project.id %>">
									<i class="fa fa-paper-plane"></i> View
								</button>
							</div>
						</div>
						
						<!-- Modal -->
						<div class="container">
							<div class="modal fade" id="modal<%= project.id %>"
							     tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
							     aria-hidden="true">
								<div class="modal-dialog modal-lg" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
											<h4 class="modal-title" id="myModalLabel"><%= project.name %></h4>
										</div>
										<div class="modal-body">
											<%= project.content.html_safe %>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
										</div>
									</div>
								</div>
							</div>
						</div>
				<% end %>
		<% end %>
	</div>
	<% if @feature == true %>
			<h1>GitHub Activity</h1>
			<!-- **** TODO: GOTTA Start caching this and Authenticating first **** -->
			<!-- http://guides.rubyonrails.org/caching_with_rails.html#low-level-caching -->
			<div class="card-columns">
				<% @eventsJson.each do |item| %>
						<div class="card">
							<% image_tag(item["actor"]["avatar_url"], class: "card-img-top") %>
							<div class="card-block">
								<p class="card-text">
									<small class="text-muted">
										<%= link_to item["actor"]["login"], item["actor"]["url"] %>
										
										<%= item["event"] %>
										
										<%= link_to item["repo"]["name"], item["repo"]["url"] %>
										
										<%= item["created_at"] %>
										<%#= link_to item["org"]["login"], item["org"]["url"] %>
									</small>
								</p>
							</div>
						</div>
				<% end %>
			</div>
			<br>
			<h1>GitHub Starred Repositories</h1>
			<div class="card-columns">
				<% @starredJson.each do |item| %>
						<div class="card">
							<div class="card-block">
								<h6 class="card-title"><%= item["name"] %></h6>
								<p class="card-text"><%= trimDescription(70, item["description"]) %></p>
								<p class="card-text">
									<small class="text-muted">
										<%= link_to "View...", item["url"] %>
									</small>
								</p>
							</div>
						</div>
				<% end %>
			</div>
	<% end %>
</div>

